(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{94306:function(e,t,a){Promise.resolve().then(a.bind(a,29253))},29253:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return MintPage}});var r=a(37151),s=a(47934),l=a(96111),n=a(64751),c=a(48553),i=a(42799),o=a(69057),d=a(9678),u=a(90409),m=a(67919),f=a(19605),h=a(36921),x=a(5294),p=a(6533),g=a(15275),j=a(38742),b=a(6575),N=a(81286),w=a(83401),y=a(87707);function BalanceCardWithTable(){let{toast:e}=(0,i.pm)(),{writeContract:t}=(0,x.S)(),[a,v]=(0,f.useState)(""),[S,k]=(0,f.useState)(!1),C=(0,s.m)(),R=(0,p.u)({...y.L,functionName:"getAllManagedTokens",args:[]}),F=(0,p.u)({...y.L,functionName:"lastMintForAccount",args:[C.address]}),T=[];if(R.isFetched&&R.data)for(let e of R.data)T.push({address:e.tokenAddress,abi:c.j,functionName:"balanceOf",args:[C.address]});let M=function(e={}){let{contracts:t=[],query:a={}}=e,r=(0,w.Z)(e),s=(0,N.x)({config:r}),l=function(e,t={}){return{async queryFn({queryKey:a}){let r=[],s=a[1].contracts.length;for(let e=0;e<s;e++){let s=a[1].contracts[e],l=t.contracts?.[e].abi;r.push({...s,abi:l})}let{scopeKey:l,...n}=a[1];return(0,g.J)(e,{...n,contracts:r})},queryKey:function(e={}){let t=[];for(let a of e.contracts??[]){let{abi:r,...s}=a;t.push({...s,chainId:s.chainId??e.chainId})}return["readContracts",(0,j.OP)({...e,contracts:t})]}(t)}}(r,{...e,chainId:s}),n=(0,f.useMemo)(()=>{let e=!1;for(let a of t){let{abi:t,address:r,functionName:s}=a;if(!t||!r||!s){e=!1;break}e=!0}return!!(e&&(a.enabled??!0))},[t,a.enabled]);return(0,b.aM)({...l,...a,enabled:n,structuralSharing:a.structuralSharing??j.if})}({contracts:T});if(R.isFetching||M.isFetching)return(0,r.jsx)("div",{children:"Loading..."});if(R.error)return(0,r.jsxs)("div",{children:["Error loading tokens: ",R.error.shortMessage]});if(M.error)return(0,r.jsxs)("div",{children:["Error loading tokens: ",M.error.message]});let P=[];if(R.data&&M.data&&R.data.length==M.data.length)for(let e=0;e<R.data.length;e++)P.push((0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.pj,{className:"font-medium",children:R.data[e].name}),(0,r.jsx)(o.pj,{className:"text-center",children:R.data[e].symbol}),(0,r.jsx)(o.pj,{className:"text-right",children:R.data[e].decimals}),(0,r.jsx)(o.pj,{className:"text-right",children:(0,h.b)(BigInt(M.data[e].result),R.data[e].decimals)})]},"tokensRow_"+e));return(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{children:(0,r.jsx)(n.ll,{children:"Tokens & Balances"})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)(o.iA,{children:[(0,r.jsx)(o.xD,{children:(0,r.jsxs)(o.SC,{children:[(0,r.jsx)(o.ss,{className:"w-[400px] font-bold",children:"Name"}),(0,r.jsx)(o.ss,{className:"text-right font-bold",children:"Symbol"}),(0,r.jsx)(o.ss,{className:"text-right font-bold",children:"Decimals"}),(0,r.jsx)(o.ss,{className:"text-right font-bold",children:"Balance"})]})}),(0,r.jsx)(o.RM,{children:P})]})}),(0,r.jsx)(n.eW,{children:(0,r.jsxs)("div",{className:"columns-1",children:[(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)(l.z,{className:(0,l.d)({className:"min-w-60"}),onClick:()=>{k(!0),t({...y.L,functionName:"mint",args:[[],50n]},{onSuccess:(t,a,r)=>{e({variant:"default",title:"Submitted mint transaction",description:t}),v(t)},onError:(t,a,r)=>{k(!1),e({variant:"destructive",title:"ERROR",description:(0,d.X)(t.message)}),console.log("MintError: "+t)},onSettled:(e,t,a,r)=>{k(!1),M.refetch(),F.refetch()}})},children:[S?(0,r.jsx)(m.Z,{className:"mr-2 size-4 animate-spin"}):(0,r.jsx)(r.Fragment,{}),S?"Please wait...":"Mint"]})}),""!=a?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(u.Z,{orientation:"vertical",className:"my-4"}),(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:"Mint TX"}),(0,r.jsx)("p",{className:"space-x-5 text-sm text-muted-foreground",children:a})]}):(0,r.jsx)(r.Fragment,{}),F.isFetched&&F.data?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(u.Z,{orientation:"vertical",className:"my-4"}),(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:"Last mint timestamp"}),(0,r.jsx)("p",{className:"space-x-5 text-sm text-muted-foreground",children:new Date(1e3*Number(F.data)).toString()})]}):(0,r.jsx)(r.Fragment,{})]})})]})}var v=a(9717),S=a(10649);function MintPage(){let e=(0,s.m)();return(0,r.jsx)("section",{className:"container grid items-center gap-6 pb-8 pt-6 md:py-10",children:(0,r.jsxs)("div",{className:"flex max-w-[980px] flex-col items-start gap-2",children:[(0,r.jsxs)("p",{className:"max-w-[900px] text-lg text-muted-foreground",children:["The ",(0,r.jsx)(v.default,{address:S._.spFactoryAddress,children:"SPFactory"})," contract allows you to mint tokens which you can then use for swaps. You are allowed ONE mint operation / day."]}),e.isConnected?(0,r.jsx)(BalanceCardWithTable,{}):(0,r.jsx)("div",{children:"Please connect a wallet."})]})})}},69057:function(e,t,a){"use strict";a.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return n},pj:function(){return m},ss:function(){return u},xD:function(){return c}});var r=a(37151),s=a(19605),l=a(91608);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...s})})});n.displayName="Table";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});c.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});i.displayName="TableBody";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})});o.displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});m.displayName="TableCell";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...s})});f.displayName="TableCaption"},15275:function(e,t,a){"use strict";a.d(t,{J:function(){return readContracts}});var r=a(51443),s=a(60911),l=a(84339),n=a(88585),c=a(36606),i=a(20078),o=a(61585),d=a(75563),u=a(69526),m=a(96229);async function multicall(e,t){let{allowFailure:a=!0,batchSize:f,blockNumber:h,blockTag:x,multicallAddress:p,stateOverride:g}=t,j=t.contracts,b=f??("object"==typeof e.batch?.multicall&&e.batch.multicall.batchSize||1024),N=p;if(!N){if(!e.chain)throw Error("client chain not configured. multicallAddress is required.");N=(0,o.L)({blockNumber:h,chain:e.chain,contract:"multicall3"})}let w=[[]],y=0,v=0;for(let e=0;e<j.length;e++){let{abi:t,address:r,args:s,functionName:l}=j[e];try{let e=(0,i.R)({abi:t,args:s,functionName:l});v+=(e.length-2)/2,b>0&&v>b&&w[y].length>0&&(y++,v=(e.length-2)/2,w[y]=[]),w[y]=[...w[y],{allowFailure:!0,callData:e,target:r}]}catch(n){let e=(0,d.S)(n,{abi:t,address:r,args:s,docsPath:"/docs/contract/multicall",functionName:l});if(!a)throw e;w[y]=[...w[y],{allowFailure:!0,callData:"0x",target:r}]}}let S=await Promise.allSettled(w.map(t=>(0,u.s)(e,m.L,"readContract")({abi:s.F8,address:N,args:[t],blockNumber:h,blockTag:x,functionName:"aggregate3",stateOverride:g}))),k=[];for(let e=0;e<S.length;e++){let t=S[e];if("rejected"===t.status){if(!a)throw t.reason;for(let a=0;a<w[e].length;a++)k.push({status:"failure",error:t.reason,result:void 0});continue}let s=t.value;for(let t=0;t<s.length;t++){let{returnData:n,success:i}=s[t],{callData:o}=w[e][t],{abi:u,address:m,functionName:f,args:h}=j[k.length];try{if("0x"===o)throw new l.wb;if(!i)throw new r.VQ({data:n});let e=(0,c.k)({abi:u,args:h,data:n,functionName:f});k.push(a?{result:e,status:"success"}:e)}catch(t){let e=(0,d.S)(t,{abi:u,address:m,args:h,docsPath:"/docs/contract/multicall",functionName:f});if(!a)throw e;k.push({error:e,result:void 0,status:"failure"})}}}if(k.length!==j.length)throw new n.G("multicall results mismatch");return k}var f=a(32451);async function multicall_multicall(e,t){let{allowFailure:a=!0,chainId:r,contracts:s,...l}=t,n=e.getClient({chainId:r}),c=(0,f.s)(n,multicall,"multicall");return c({allowFailure:a,contracts:s,...l})}var h=a(74575);async function readContracts(e,t){let{allowFailure:a=!0,blockNumber:s,blockTag:l,...n}=t,c=t.contracts;try{let t={};for(let[a,r]of c.entries()){let s=r.chainId??e.state.chainId;t[s]||(t[s]=[]),t[s]?.push({contract:r,index:a})}let r=(await Promise.all(Object.entries(t).map(([t,r])=>multicall_multicall(e,{...n,allowFailure:a,blockNumber:s,blockTag:l,chainId:Number.parseInt(t),contracts:r.map(({contract:e})=>e)})))).flat(),i=Object.values(t).flatMap(e=>e.map(({index:e})=>e));return r.reduce((e,t,a)=>(e&&(e[i[a]]=t),e),[])}catch(t){if(t instanceof r.uq)throw t;let promises=()=>c.map(t=>(0,h.L)(e,{...t,blockNumber:s,blockTag:l}));if(a)return(await Promise.allSettled(promises())).map(e=>"fulfilled"===e.status?{result:e.value,status:"success"}:{error:e.reason,result:void 0,status:"failure"});return await Promise.all(promises())}}}},function(e){e.O(0,[555,867,934,672,582,174,88,951,210,744],function(){return e(e.s=94306)}),_N_E=e.O()}]);